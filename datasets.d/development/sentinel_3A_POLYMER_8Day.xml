<dataset type="EDDGridFromNcFiles" datasetID="sentinel_3A_POLYMER_8Day" active="true">
    <reloadEveryNMinutes>10080</reloadEveryNMinutes>
    <updateEveryNMillis>10000</updateEveryNMillis>
    <fileDir>/algae_explorer/6_bin8_data/</fileDir>
    <fileNameRegex>.*\.nc</fileNameRegex>
    <recursive>true</recursive>
    <pathRegex>.*</pathRegex>
    <metadataFrom>last</metadataFrom>
    <matchAxisNDigits>20</matchAxisNDigits>
    <fileTableInMemory>false</fileTableInMemory>
    <accessibleViaWMS>true</accessibleViaWMS>
    <defaultGraphQuery>chl_conc_mean[last][0][0:last][0:last]&amp;.draw=surface&amp;.vars=longitude|latitude|temp</defaultGraphQuery>
    <!-- sourceAttributes>
        <att name="Conventions">CF-1.4</att>
        <att name="metadata_profile">beam</att>
        <att name="metadata_version">0.5</att>
        <att name="product_type">BINNED-L3</att>
        <att name="start_date">25-JUN-2023 00:00:00.000000</att>
        <att name="stop_date">03-JUL-2023 00:00:00.000000</att>
        <att name="TileSize">64:64</att>
    </sourceAttributes -->
    <addAttributes>
        <att name="cdm_data_type">Grid</att>
        <att name="Conventions">CF-1.6, COARDS, ACDD-1.3</att>
        <att name="infoUrl">???</att>
        <att name="institution">???</att>
        <att name="keywords">chl, chl_conc_counts, chl_conc_mean, chl_conc_p50, chl_conc_sigma, chlorophyll, conc, counts, data, local, logchl, logchl_counts, logchl_mean, logchl_p50, logchl_sigma, mean, num, num_obs, num_passes, obs, observations, p50, passes, sigma, source, spm, SPM_counts, SPM_mean, SPM_p50, SPM_sigma</att>
        <att name="license">[standard]</att>
        <att name="standard_name_vocabulary">CF Standard Name Table v70</att>
        <att name="start_date">null</att>
        <att name="stop_date">null</att>
        <att name="citation">Costa, M., &amp; Hakai Institute. (2023). Sentinel-3A OLCI Imagery - Automated daily POLYMER processed satellite chlorophyll concentrations for coastal British Columbia and southeast Alaska (Version v1). Hakai Institute</att>
        <att name="creator_name">Hakai Institute</att>
        <att name="creator_url">https://www.hakai.org/</att>
        <att name="creator_institution">Hakai Institute</att>
        <att name="creator_type">institution</att>
        <att name="publisher_name">Hakai Institute</att>
        <att name="publisher_institution">Hakai Institute</att>
        <att name="publisher_url">https://www.hakai.org/</att>
        <att name="publisher_type">institution</att>
        <att name="contributor_name">Maycira Costa - Spectral Laboratory</att>
        <att name="contributor_role">Principal Investigator - Collaborator - Originator</att>
        <att name="date_created">2023-08-01</att>
        <att name="geospatial_lat_max">59.5</att>
        <att name="geospatial_lat_min">47</att>
        <att name="geospatial_lon_max">-121.5</att>
        <att name="geospatial_lon_min">-139</att>
        <att name="geospatial_vertical_min">0</att>
        <att name="geospatial_vertical_max">5</att>
        <att name="institution">Spectral Labratory,Hakai Institute</att>
        <att name="project">Oceanography</att>
        <att name="product_version">1</att>
        <att name="license">https://creativecommons.org/licenses/by/4.0</att>
        <att name="id">d1bef0b7-4d15-4bc1-bf34-faca6352891f</att>
        <att name="naming_authority">ca.cioos</att>
        <att name="references">https://doi.org/</att>
        <att name="keywords">remote sensing,chlorophyll a,phytoplankton,coastal zone,water quality,abundance and biomass</att>
        <att name="platform">satellite</att>
        <att name="platform_vocabulary">http://vocab.nerc.ac.uk/collection/L06/current/</att>
        <att name="summary">This is an ongoing dataset of automated daily POLYMER processed Sentinel-3A OLCI images of ocean chlorophyll-a concentrations. Sentinel-3A is an oceanography focused European Space Agency (ESA) satellite that is jointly operated with the European Organization for the Exploitation of Meteorological Satellites (EUMSTAT). The system has been operational since April 2016 and was designed to continue the Envisat Medium Resolution Imaging Spectrometer (MERIS) mission. The OLCI is a push-broom radiometer that has a 300m spatial and daily temporal resolution, 21 spectral bands from 400-1200nm, an improved signal-to-noise ratio and an off-nadir swath that is centered to minimize ocean sun glint. These features make the instrument well suited to retrievals of biogeochemical products from optically complex coastal waters.

            Satellite retrievals of biogeochemical products from optically complex coastal regions can have high error and as a result, the performance of OLCI is under continuous review. In British Columbia, the SPECTRAL remote sensing laboratory at the University of Victoria has performed extensive evaluation of atmospheric correction methods to determine the most precise approaches for regional chlorophyll retrievals. Validation of results with in-situ data showed the best results using OLCI Sentinel-3A Level-1 images processed with the POLYnomial based algorithm applied to MERIS (POLYMER) atmospheric correction with the application of the recommended flags including the &quot;Case-2&quot; flag and exclusion of the &quot;Thick Aerosol&quot; flag.  Detailed information on these validations and results are provided in Giannini et al. (2021) and POLYMER in Steinmetz et al. (2016) provided in the accompanying resources.

            Following the derivation of the best approach, the SPECTRAL laboratory in collaboration with the University of Victoria MOD(ularity) Squad, developed an automated system that outputs near real-time (prior day) fully processed OLCI Sentinel 3A chlorophyl imagery for the British Columbia and southeast Alaska coast and offshore waters. In brief, the system: 1) downloads Sentinel-3A Level-1 data from the Sentinel-3 Marine Copernicus Online Data Access (CODA) web service; 2) applies the POLYMER atmospheric correction and flagging and; 3) mosaics the imagery for the study region resulting in fully processed level-3 chlorophyll imagery. Details on the development of this system are provided in Jacoby et al. (2019) referenced in the accompanying resources.

            In 2022, the Hakai Institute took continued responsibility for the processing pipeline. Since then, the Hakai institute has transferred processing infrastructure from Microsoft Azure to the Amazon Web Service (AWS) and created automated submission of daily fully processed chlorophyll imagery to the Canadian Integrated Ocean Observing System (CIOOS). 

            This product provides the current best known regional OLCI Sentinel-3A chlorophyll retrievals that were shown to have low systematic biases; however, relative percent differences remain high (80-100%) and this should be acknowledged by data users. In addition, error often exists in high turbidity regions (Fraser River plume and fjords) and at times, these pixels were difficult to correct or remove from the imagery and care should be taken when using data from these areas. Finally, there is continued evaluation and improvement of all aspects of the above methods and new methods may provide better retrievals than those provided here.


            Satellite remote sensing has been increasingly used to study surface ocean processes over large areas and high temporal resolutions that would not be achievable using ship based methods. Chlorophyll, as the most widely used measure of phytoplankton biomass, is crucial for understanding phytoplankton which are the base of marine food webs and crucial for ocean biogeochemical cycling. Satellite retrievals of chlorophyll provide the necessary resolution required to understand long term variability under a changing climate.


            Funding for the SPECTRAL laboratory validation studies and processing automation was provided by the UBC/UVic Hakai Coastal Initiative postdoctoral fellowship, NSERC NCE Marine Environmental Observation Prediction And Response (MEOPAR) network, Canadian Space Agency (CSA), Canadian Foundation for Innovation (CFI) and NSERC Discover Grant. 

            The data originators (SPECTRAL remote sensing laboratory) request that users reference Giannini et al. (2021) and Jacoby et al. (2019) if data is used for published research.</att>
        <att name="title">Sentinel-3A OLCI Imagery - Automated 8 days averaged POLYMER processed satellite chlorophyll concentrations for coastal British Columbia and southeast Alaska</att>
    </addAttributes>
    <axisVariable>
        <sourceName>***pathName,timeFormat=yyyy/MM/dd,/algae_explorer/6_bin8_data/(\d{4}/\d{2}/\d{2})/mosaic_bin8_output\.nc,1</sourceName>
        <destinationName>time</destinationName>
        <!-- sourceAttributes>
        </sourceAttributes -->
        <addAttributes>
            <att name="long_name">Time</att>
            <att name="standard_name">time</att>
        </addAttributes>
    </axisVariable>
    <axisVariable>
        <sourceName>lat</sourceName>
        <destinationName>latitude</destinationName>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uint">4639</att>
            <att name="long_name">latitude</att>
            <att name="standard_name">latitude</att>
            <att name="units">degrees_north</att>
            <att name="valid_max" type="double">59.5000898311175</att>
            <att name="valid_min" type="double">47.00098814229249</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="long_name">Latitude</att>
        </addAttributes>
    </axisVariable>
    <axisVariable>
        <sourceName>lon</sourceName>
        <destinationName>longitude</destinationName>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uint">6494</att>
            <att name="long_name">longitude</att>
            <att name="standard_name">longitude</att>
            <att name="units">degrees_east</att>
            <att name="valid_max" type="double">-121.50242544017246</att>
            <att name="valid_min" type="double">-139.00062881782247</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="long_name">Longitude</att>
        </addAttributes>
    </axisVariable>
    <dataVariable>
        <sourceName>num_obs</sourceName>
        <destinationName>num_obs</destinationName>
        <dataType>int</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="int">-1</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Num Obs</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>num_passes</sourceName>
        <destinationName>num_passes</destinationName>
        <dataType>short</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="short">-1</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Num Passes</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>logchl_mean</sourceName>
        <destinationName>logchl_mean</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Logchl Mean</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>logchl_sigma</sourceName>
        <destinationName>logchl_sigma</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Logchl Sigma</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>logchl_counts</sourceName>
        <destinationName>logchl_counts</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Logchl Counts</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>logchl_p50</sourceName>
        <destinationName>logchl_p50</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Logchl P50</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>SPM_mean</sourceName>
        <destinationName>SPM_mean</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">SPM Mean</att>
            <att name="units">mg/m^3</att>
            <att name="cell_method">time: mean (interval: 1 day comments: previous 8 day from present inclusively)</att>
            <att name="colorBarMaximum" type="float">50.0</att>
            <att name="colorBarMinimum" type="float">0.02</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">Spectrum</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>SPM_sigma</sourceName>
        <destinationName>SPM_sigma</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">SPM Sigma</att>
            <att name="units">mg/m^3</att>
            <att name="cell_method">time: standard deviation (interval: 1 day comments: previous 8 day from present inclusively)</att>
            <att name="colorBarMaximum" type="float">5.0</att>
            <att name="colorBarMinimum" type="float">0.005</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">KT_thermal</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>SPM_counts</sourceName>
        <destinationName>SPM_counts</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">SPM Counts</att>
            <att name="cell_method">time: count (interval: 1 day comments: previous 8 day from present inclusively)</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>SPM_p50</sourceName>
        <destinationName>SPM_p50</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">SPM P50</att>
            <att name="units">mg/m^3</att>
            <att name="cell_method">time: median (interval: 1 day comments: previous 8 day from present inclusively)</att>
            <att name="colorBarMaximum" type="float">50.0</att>
            <att name="colorBarMinimum" type="float">0.02</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">Spectrum</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>chl_conc_mean</sourceName>
        <destinationName>chl_conc_mean</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Chl Conc Mean</att>
            <att name="standard_name">mass_concentration_of_chlorophyll_a_in_sea_water</att>
            <att name="units">mg/m^3</att>
            <att name="cell_method">time: mean (interval: 1 day comments: previous 8 day from present inclusively)</att>
            <att name="colorBarMaximum" type="float">40.0</att>
            <att name="colorBarMinimum" type="float">0.15</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">Spectrum</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>chl_conc_sigma</sourceName>
        <destinationName>chl_conc_sigma</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Chl Conc Sigma</att>
            <att name="standard_name">mass_concentration_of_chlorophyll_a_in_sea_water</att>
            <att name="units">mg/m^3</att>
            <att name="cell_method">time: standard deviation (interval: 1 day comments: previous 8 day from present inclusively)</att>
            <att name="colorBarMaximum" type="float">5.0</att>
            <att name="colorBarMinimum" type="float">0.005</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">KT_thermal</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>chl_conc_counts</sourceName>
        <destinationName>chl_conc_counts</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Chl Conc Counts</att>
            <att name="cell_method">time: count (interval: 1 day comments: previous 8 day from present inclusively)</att>
        </addAttributes>
    </dataVariable>
    <dataVariable>
        <sourceName>chl_conc_p50</sourceName>
        <destinationName>chl_conc_p50</destinationName>
        <dataType>float</dataType>
        <!-- sourceAttributes>
            <att name="_ChunkSizes" type="uintList">64 64</att>
            <att name="_FillValue" type="float">NaN</att>
            <att name="coordinates">lat lon</att>
        </sourceAttributes -->
        <addAttributes>
            <att name="_ChunkSizes">null</att>
            <att name="coordinates">null</att>
            <att name="long_name">Chl Conc P50</att>
            <att name="standard_name">mass_concentration_of_chlorophyll_a_in_sea_water</att>
            <att name="units">mg/m^3</att>
            <att name="cell_method">time: median (interval: 1 day comments: previous 8 day from present inclusively)</att>
            <att name="colorBarMaximum" type="float">40.0</att>
            <att name="colorBarMinimum" type="float">0.15</att>
            <att name="colorBarScale">Log</att>
            <att name="colorBarPalette">Spectrum</att>
        </addAttributes>
    </dataVariable>
</dataset>
